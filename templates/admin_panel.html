<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel</title>
    <style>
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 5px; }
        form { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Admin Panel</h1>

    <h2>Benutzerliste</h2>
    <table>
        <tr>
            <th>ID</th><th>Username</th><th>Rollen</th><th>Aktionen</th>
        </tr>
        {% for user in users %}
        <tr>
            <form action="{{ url_for('update_user', user_id=user.id) }}" method="post">
            <td>{{ user.id }}</td>
            <td><input name="username" value="{{ user.username }}"></td>
            <td>
                <select name="role_id">
                    <option value="">Keine</option>
                    {% for role in roles %}
                        <option value="{{ role.id }}" {% if role in user.roles %}selected{% endif %}>{{ role.name }}</option>
                    {% endfor %}
                </select>
            </td>
            <td>
                <input type="password" name="new_password" placeholder="Neues Passwort">
                <button type="submit">Ändern</button>
                <a href="{{ url_for('delete_user', user_id=user.id) }}" onclick="return confirm('Wirklich löschen?')">Löschen</a>
            </td>
            </form>
        </tr>
        {% endfor %}
    </table>

    <h2>Neuen Benutzer hinzufügen</h2>
    <form method="post">
        <input type="text" name="new_username" placeholder="Benutzername" required>
        <input type="password" name="new_password" placeholder="Passwort" required>
        <select name="new_role">
            <option value="">Keine Rolle</option>
            {% for role in roles %}
                <option value="{{ role.id }}">{{ role.name }}</option>
            {% endfor %}
        </select>
        <button type="submit">Hinzufügen</button>
    </form>
</body>
</html>
