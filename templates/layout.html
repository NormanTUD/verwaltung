<!DOCTYPE html>
<html lang="de" class="no-js transition-colors">
	<head>
		<meta charset="UTF-8">
		<title>Verwaltung &mdash; {% block title %}Meine Seite{% endblock %}</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="/static/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="/static/style.css">
		<script src="/static/jquery.min.js" defer></script>
		<script src="/static/tailwind.js"></script>
		<script src="/static/tailwind_config.js"></script>
		<script src="/static/lottie.min.js"></script>
	</head>
	<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-white transition-all flex" style='height: fit-content;'>

		{% if is_authenticated %}
			<!-- Sidebar -->
			<nav id="sidebar" class="bg-gray-800 text-white w-64 min-h-screen p-4 space-y-4 invisible">
				<h2 class="text-2xl font-bold mb-6"><a href='/'>🗂️ Verwaltung</a></h2>

				<div>
<input
  type="text"
  id="sidebarSearch"
  placeholder="🔍 Suchen..."
  class="w-full px-3 py-2 rounded border text-white bg-gray-800 border-blue-400"
/>

<script>

</script>

					<ul id="sidebarSearchResults" class="bg-white text-black rounded mt-1 max-h-60 overflow-auto shadow-lg hidden absolute z-50 w-60"></ul>
				</div>


				<div class="pt-6 space-y-2">
					<!-- Theme toggle: IMMER sichtbar -->
					<button id="toggleThemeBtn" class="w-full bg-gray-700 hover:bg-gray-600 py-2 rounded transition">🌓 Theme</button>

					{% if is_authenticated %}
						{% if is_admin %}
							<!-- Admin-Link nur für Admins -->
							<a href="/admin" class="w-full block text-center bg-blue-700 hover:bg-blue-600 py-2 rounded transition text-white">🛠️ Admin</a>
						{% endif %}
						<a href="/logout" class="w-full block text-center bg-red-600 hover:bg-red-500 py-2 rounded transition text-white">🚪 Logout</a>
					{% else %}
						<a href="/login" class="w-full block text-center bg-green-700 hover:bg-green-600 py-2 rounded transition text-white">🔐 Login</a>
					{% endif %}
				</div>

				<ul class="space-y-2">
					<li class="text-sm text-gray-400 uppercase">🧙 Wizards</li>
					{% for route in wizard_routes %}
					<li>
						<a href="{{ route }}" class="block px-4 py-2 rounded transition hover:bg-gray-700 {% if request.path == route %}bg-gray-700{% endif %}">
							{{ route.replace('/wizard/', '').capitalize() }}
						</a>
					</li>
					{% endfor %}

					<li class="mt-4 text-sm text-gray-400 uppercase">📦 Aggregate</li>
					<li><a href="{{ url_for('aggregate_inventory_view') }}" class="block px-4 py-2 rounded transition hover:bg-gray-700 {% if request.path == url_for('aggregate_inventory_view') %}bg-gray-700{% endif %}">Inventar</a></li>
					<li><a href="{{ url_for('aggregate_transponder_view') }}" class="block px-4 py-2 rounded transition hover:bg-gray-700 {% if request.path == url_for('aggregate_transponder_view') %}bg-gray-700{% endif %}">Transponder</a></li>

					{% if is_admin %}
						<li class="mt-4 text-sm text-gray-400 uppercase">📋 Tabellen</li>
						{% for table in tables %}
						<li>
							<a href="{{ url_for('table_view', table_name=table) }}" class="block px-4 py-2 rounded transition hover:bg-gray-700 {% if request.path == url_for('table_view', table_name=table) %}bg-gray-700{% endif %}">
								{{ table.capitalize() }}
							</a>
						</li>
						{% endfor %}
					{% endif %}

					<li class="mt-4 text-sm text-gray-400 uppercase">🗺️ Karten</li>
					{% if is_admin %}
						<li><a href="/map-editor" class="block px-4 py-2 rounded transition hover:bg-gray-700 {% if request.path == '/map-editor' %}bg-gray-700{% endif %}">Map-Editor</a></li>
					{% endif %}
					<li><a href="/floorplan" class="block px-4 py-2 rounded transition hover:bg-gray-700 {% if request.path == '/floorplan' %}bg-gray-700{% endif %}">Floorplan</a></li>
				</ul>
			</nav>
		{% endif %}

		<!-- Main Content -->
		<main class="flex-grow p-6 transition-all ">
			{% block content %}
			<h1 class="text-3xl font-bold">Willkommen</h1>
			{% endblock %}
		</main>

		<!-- Toast -->
		<div id="toast" class="toast hidden"></div>

		<!-- Scripts -->
		<script src="/static/layout.js" defer></script>

		<script src="/static/footer.js" defer></script>
	</body>
</html>
